package br.com.trainer.api.controller;

import br.com.trainer.api.dto.AgendamentoDTO;
import br.com.trainer.api.entity.Agendamento;
import br.com.trainer.api.entity.Aluno;
import br.com.trainer.api.repository.AlunoRepository;
import br.com.trainer.api.service.AgendamentoService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.*;

import java.time.LocalDate;
import java.time.LocalTime;
import java.time.format.DateTimeFormatter;
import java.util.Scanner;

@RestController
@RequestMapping("/agendamentos")
public class AgendamentoController {

    @Autowired
    private AgendamentoService agendamentoService;

    @Autowired
    private AlunoRepository alunoRepository;

    private Scanner scanner = new Scanner(System.in); // Inicializa o scanner

    @PostMapping
    public void adicionarAgendamento() {
        try {
            System.out.print("CPF do Aluno: ");
            String alunoCpf = scanner.nextLine(); // Captura o CPF do aluno

            // Busca o aluno pelo CPF
            Aluno aluno = alunoRepository.findByCpf(alunoCpf)
                    .orElseThrow(() -> new RuntimeException("Aluno n√£o encontrado"));

            System.out.print("Data (dd/MM/yyyy): ");
            String dataInput = scanner.nextLine();
            LocalDate data = LocalDate.parse(dataInput, DateTimeFormatter.ofPattern("dd/MM/yyyy"));

            System.out.print("Hora (HH:mm): ");
            String horaInput = scanner.nextLine();
            LocalTime hora = LocalTime.parse(horaInput, DateTimeFormatter.ofPattern("HH:mm"));

            System.out.print("Valor da Aula: ");
            Double valor = scanner.nextDouble();
            scanner.nextLine(); //
